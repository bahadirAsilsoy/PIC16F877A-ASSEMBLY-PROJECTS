#include    <p16f877a.inc>
    
D1		EQU	0x20
D2		EQU	0x21
D3		EQU	0x22
		
BIRLER		EQU	0x23
ONLAR		EQU	0x24
SAYAC_BIRLER	EQU	0x25
SAYAC_ONLAR	EQU	0x26
	    
	    ORG	    0x000
    
	    nop
    
	    GOTO    BASLA
GECIKME
	MOVLW	0x04
	MOVWF	D3
	    
LOOP3	MOVLW	0xFF
	MOVWF	D2
	    
LOOP2	MOVLW	0xFF
	MOVWF	D1
	
LOOP1	DECFSZ	D1,F
	GOTO	LOOP1
	
	DECFSZ	D2,F
	GOTO	LOOP2
	
	DECFSZ	D3,F
	GOTO	LOOP3
	RETURN

RAKAMLAR_CIFT
	ADDWF	PCL,F
	RETLW	b'00111111' ;0
	RETLW	b'01011011' ;2
	RETLW	b'01100110' ;4
	RETLW	b'01111101' ;6	     
	RETLW	b'01111111' ;8
RAKAMLAR
	ADDWF	PCL,F
	RETLW	b'00111111' ;0
	RETLW	b'00000110' ;1
	RETLW	b'01011011' ;2
	RETLW	b'01001111' ;3 
	RETLW	b'01100110' ;4
	RETLW	b'01101101' ;5
	RETLW	b'01111101' ;6
	RETLW	b'00000111' ;7 
	RETLW	b'01111111' ;8
	RETLW	b'01101111' ;9
	
BASLA	
	
	;PORTA AYARLA
	BANKSEL	PORTA
	CLRF	PORTA
	
	BANKSEL	TRISA
	MOVLW	0x06
	MOVWF	ADCON1
	
	MOVLW	b'00111100'
	MOVWF	TRISA
	
	;PORTB AYARLA
	BANKSEL	TRISB
	CLRF	TRISB
	
	BANKSEL	PORTB
	CLRF	PORTB
	
	;SAYACLARI AYARLA
	
	MOVLW	0x00
	MOVWF	BIRLER
	
	MOVLW	0x04
	MOVWF	SAYAC_BIRLER
	
	MOVLW	0x00
	MOVWF	ONLAR
	
	MOVLW	0x0A
	MOVWF	SAYAC_ONLAR
	
	;ARTTIRMAYA BIRLERDEN BASLA
DONGU1	MOVLW	b'00000001'
	MOVWF	PORTA
	INCF	BIRLER,F
	MOVF	BIRLER,W
	CALL	RAKAMLAR_CIFT
	MOVWF	PORTB
	CALL	GECIKME
	
	MOVLW	b'00000010'
	MOVWF	PORTA
	MOVF	ONLAR,W
	CALL	RAKAMLAR
	MOVWF	PORTB
	CALL	GECIKME
	DECFSZ	SAYAC_BIRLER
	CALL	DONGU1
	
	;SAYACLARI SIFIRLA
	MOVLW	0x00
	MOVWF	BIRLER
	
	MOVLW	0x04
	MOVWF	SAYAC_BIRLER
	
	;ARTTIRMAYA ONLARDAN BASLA
	MOVLW	b'00000010'
	MOVWF	PORTA
	INCF	ONLAR,F
	MOVF	ONLAR,W
	CALL	RAKAMLAR
	MOVWF	PORTB
	CALL	GECIKME
	DECFSZ	SAYAC_ONLAR
	CALL	DONGU1
	
	;SAYACLARI SIFIRLA
	MOVLW	0x00
	MOVWF	BIRLER
	
	MOVLW	0x04
	MOVWF	SAYAC_BIRLER
	
	MOVLW	0x00
	MOVWF	ONLAR
	
	MOVLW	0x0A
	MOVWF	SAYAC_ONLAR
	CALL	DONGU1
	
	END

    